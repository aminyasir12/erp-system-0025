@echo off
echo ==============================================
echo  ุจุฏุก ุชุดุบูู ูุธุงู ุฅุฏุงุฑุฉ ููุงุท ุงูุจูุน (POS)
echo ==============================================

:: ุชุนููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
echo โ๏ธ  ุฌุงุฑู ุชุนููู ูุชุบูุฑุงุช ุงูุจูุฆุฉ...
set NODE_ENV=development
set DEBUG=app:*,sequelize:*

:: ุงูุชุญูู ูู ุชุซุจูุช Node.js
node --version >nul 2>&1
if %ERRORLEVEL% neq 0 (
    echo โ ุฎุทุฃ: ูุจุฏู ุฃู Node.js ุบูุฑ ูุซุจุช ุนูู ุฌูุงุฒู
    echo ูุฑุฌู ุชุซุจูุช Node.js ูู ุงููููุน ุงูุฑุณูู: https://nodejs.org/
    pause
    exit /b 1
)

:: ุงูุชุญูู ูู ุชุซุจูุช npm
npm --version >nul 2>&1
if %ERRORLEVEL% neq 0 (
    echo โ ุฎุทุฃ: ูุจุฏู ุฃู npm ุบูุฑ ูุซุจุช ุนูู ุฌูุงุฒู
    echo ูุฑุฌู ุชุซุจูุช Node.js ููุชุถูู npm
    pause
    exit /b 1
)

:: ุชุซุจูุช ุงูุชุจุนูุงุช
echo ๐ฆ ุฌุงุฑู ุชุซุจูุช ุงูุชุจุนูุงุช...
npm install
if %ERRORLEVEL% neq 0 (
    echo โ ูุดู ูู ุชุซุจูุช ุงูุชุจุนูุงุช
    pause
    exit /b 1
)

:: ุฅูุดุงุก ููู .env ุฅุฐุง ูู ููู ููุฌูุฏุงู
if not exist .env (
    echo โ๏ธ  ุฅูุดุงุก ููู .env ูู ุงููุซุงู...
    copy .env.example .env
    echo โ๏ธ  ูุฑุฌู ุชุนุฏูู ููู .env ุจุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูููุงุณุจุฉ
    pause
)

:: ุชุดุบูู ุงูุชุทุจูู
echo ๐ ุจุฏุก ุชุดุบูู ุงูุชุทุจูู...
node start.js

:: ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ
if %ERRORLEVEL% neq 0 (
    echo.
    echo โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุดุบูู ุงูุชุทุจูู
    echo ๐ ุชุญูู ูู ุณุฌูุงุช ุงูุฃุฎุทุงุก ุฃุนูุงู ููุฒูุฏ ูู ุงููุนูููุงุช
)

pause
