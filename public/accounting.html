<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>المحاسبة - نظام إدارة الأعمال</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="css/main-styles.css">
  <link rel="stylesheet" href="css/modal-styles.css">

<!-- <style>
    /* --- Global Styles & ERP-Inspired Variables (Consistent with previous design) --- */
:root {
  --erp-primary-color: #714B67;
  --erp-primary-color-dark: #583A50;
  --erp-primary-color-light: rgba(113, 75, 103, 0.1);
  --erp-secondary-color: #4A5568;
  --erp-success-color: #38A169;
  --erp-warning-color: #DD6B20;
  --erp-danger-color: #E53E3E;
  --erp-info-color: #3182CE;

  --erp-body-bg: #F7FAFC;
  --erp-content-bg: #FFFFFF;
  --erp-sidebar-bg: #323A46;
  --erp-sidebar-text-color: #CBD5E0;
  --erp-sidebar-active-bg: var(--erp-primary-color);
  --erp-sidebar-hover-bg: #4A5568;
  --erp-text-color: #2D3748;
  --erp-text-muted-color: #718096;
  --erp-border-color: #E2E8F0;

  --erp-font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --erp-font-size-base: 14px;
  --erp-border-radius: 4px;
  --erp-box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.07), 0 1px 2px 0 rgba(0, 0, 0, 0.04);
  --erp-input-height: 38px;
}

body {
  font-family: var(--erp-font-family);
  background-color: var(--erp-body-bg);
  color: var(--erp-text-color);
  margin: 0;
  font-size: var(--erp-font-size-base);
  line-height: 1.5;
  direction: rtl;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* --- Dashboard Layout --- */
.dashboard {
  display: flex;
  min-height: 100vh;
}

/* --- Sidebar Styling (Consistent) --- */
.sidebar {
  width: 240px;
  background-color: var(--erp-sidebar-bg);
  color: var(--erp-sidebar-text-color);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  border-left: 1px solid rgba(255, 255, 255, 0.05); /* For RTL, slightly lighter border inside sidebar */
}

.sidebar-header {
  padding: 18px 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  text-align: center;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sidebar-header h3 {
  margin: 0;
  font-size: 1.15em;
  font-weight: 600;
  color: #FFF;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sidebar-menu {
  flex-grow: 1;
  padding-top: 15px;
  overflow-y: auto;
}

.sidebar-menu .menu-item { /* Added selector for specificity */
  display: flex;
  align-items: center;
  padding: 12px 20px;
  color: var(--erp-sidebar-text-color);
  text-decoration: none;
  font-size: 0.95em;
  transition: background-color 0.15s ease, color 0.15s ease;
  border-right: 3px solid transparent; /* For RTL */
}

.sidebar-menu .menu-item i { /* Added selector */
  margin-left: 12px;
  font-size: 1.05em;
  width: 18px;
  text-align: center;
  opacity: 0.8;
  transition: opacity 0.15s ease;
}

.sidebar-menu .menu-item:hover { /* Added selector */
  background-color: var(--erp-sidebar-hover-bg);
  color: #FFF;
}
.sidebar-menu .menu-item:hover i { /* Added selector */
  opacity: 1;
}

.sidebar-menu .menu-item.active { /* Added selector */
  background-color: var(--erp-sidebar-active-bg);
  color: #FFF;
  font-weight: 500;
  border-right-color: #FFF;
}

.sidebar-menu .menu-item.active i { /* Added selector */
  opacity: 1;
}

/* --- Main Content Styling (Consistent) --- */
.main-content {
  flex-grow: 1;
  padding: 20px 25px;
  overflow-y: auto;
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 1px solid var(--erp-border-color);
}

.page-header h1 {
  font-size: 1.6em;
  font-weight: 600;
  color: var(--erp-text-color);
  margin: 0;
}

/* --- Button Styling (Consistent) --- */
.btn {
  padding: 0.5rem 1rem;
  font-size: var(--erp-font-size-base);
  border-radius: var(--erp-border-radius);
  border: 1px solid transparent;
  cursor: pointer;
  transition: background-color 0.15s ease, border-color 0.15s ease, box-shadow 0.15s ease;
  font-weight: 500;
  line-height: 1.5;
  height: var(--erp-input-height);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.btn i {
  margin-left: 6px;
}

.btn-primary {
  background-color: var(--erp-primary-color);
  color: #FFF;
  border-color: var(--erp-primary-color);
}

.btn-primary:hover, .btn-primary:focus {
  background-color: var(--erp-primary-color-dark);
  border-color: var(--erp-primary-color-dark);
  box-shadow: 0 0 0 0.2rem rgba(113, 75, 103, 0.25);
}

/* --- Financial Summary Cards --- */
.financial-summary {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Adjusted minmax for fewer cards */
  gap: 20px; /* Slightly larger gap */
  margin-bottom: 25px;
}

.summary-card {
  background-color: var(--erp-content-bg);
  padding: 20px;
  border-radius: var(--erp-border-radius);
  border: 1px solid var(--erp-border-color);
  box-shadow: var(--erp-box-shadow);
  text-align: right; /* For RTL */
}

.summary-card h3 {
  font-size: 0.95em;
  color: var(--erp-text-muted-color);
  margin-top: 0;
  margin-bottom: 8px;
  font-weight: 500;
  text-transform: uppercase;
}

.summary-card .amount {
  font-size: 1.7em; /* Prominent amount */
  font-weight: 600;
  margin-bottom: 5px;
  line-height: 1.2;
}

.summary-card.income .amount { color: var(--erp-success-color); }
.summary-card.expense .amount { color: var(--erp-danger-color); }
.summary-card.balance .amount { color: var(--erp-primary-color); } /* Or a neutral prominent color */

.summary-card small {
  font-size: 0.8em;
  color: var(--erp-text-muted-color);
}

/* --- Card Styling (Consistent) --- */
.card {
  background-color: var(--erp-content-bg);
  border-radius: var(--erp-border-radius);
  border: 1px solid var(--erp-border-color);
  box-shadow: var(--erp-box-shadow);
  margin-bottom: 25px;
}

.card-header {
  background-color: #F9FAFB;
  padding: 12px 18px;
  border-bottom: 1px solid var(--erp-border-color);
  display: flex;
  justify-content: space-between;
  align-items: center;
  min-height: 50px;
}
.card-header h5 { /* Targeting the h5 in card-header */
    margin: 0;
    font-size: 1.05em; /* Slightly larger than base */
    font-weight: 600;
    color: var(--erp-text-color);
}


/* Search Box in Card Header (Consistent) */
.card-header .search-box { /* More specific selector */
  position: relative;
  width: 220px;
}

.card-header .search-box input[type="text"] { /* More specific selector */
  padding-right: 35px;
  border-radius: var(--erp-border-radius);
  font-size: var(--erp-font-size-base);
  height: calc(var(--erp-input-height) - 6px); /* Adjusted for slightly smaller input in header */
  width: 100%; /* Ensure it takes full width of .search-box */
  border: 1px solid var(--erp-border-color);
  background-color: var(--erp-content-bg);
}
.card-header .search-box input[type="text"]:focus {
  border-color: var(--erp-primary-color);
  box-shadow: 0 0 0 0.2rem rgba(113, 75, 103, 0.15);
  outline: none;
}


.card-header .search-box i.fa-search { /* More specific selector */
  position: absolute;
  top: 50%;
  right: 12px;
  transform: translateY(-50%);
  color: var(--erp-text-muted-color);
  font-size: 0.9em;
  pointer-events: none; /* So it doesn't interfere with input click */
}

.card-body {
  padding: 18px;
}

/* Table Styling (Consistent) */
.table {
  width: 100%;
  margin-bottom: 0;
  font-size: var(--erp-font-size-base);
  border-collapse: collapse;
}

.table thead th {
  background-color: #F9FAFB;
  color: var(--erp-text-muted-color);
  font-weight: 500;
  border-bottom: 2px solid var(--erp-border-color);
  border-top: 1px solid var(--erp-border-color);
  padding: 10px 12px;
  text-align: right;
  white-space: nowrap;
}

.table tbody td {
  padding: 10px 12px;
  vertical-align: middle;
  border-bottom: 1px solid var(--erp-border-color);
  color: var(--erp-text-color);
}
.table tbody tr:last-child td {
    border-bottom: none;
}

.table .text-success { color: var(--erp-success-color) !important; font-weight: 500; }
.table .text-danger { color: var(--erp-danger-color) !important; font-weight: 500;} /* Example for expenses */


/* Badge Styling (Consistent - assuming .badge and .bg-success are Bootstrap 5 classes) */
.badge { /* General Bootstrap .badge styling if not overridden by .bg-* */
  padding: 0.35em 0.6em !important; /* Adjust padding for consistency */
  font-size: 0.8em !important;
  font-weight: 500 !important;
  border-radius: var(--erp-border-radius) !important;
  line-height: 1;
}

.bg-success { /* For .badge.bg-success */
  background-color: var(--erp-primary-color-light) !important; /* Use a light version of success for background */
  color: var(--erp-success-color) !important;
  border: 1px solid var(--erp-success-color); /* Add a border for definition */
}
.bg-danger { /* Example for a "pending" or "failed" status */
  background-color: rgba(229, 62, 62, 0.1) !important;
  color: var(--erp-danger-color) !important;
  border: 1px solid var(--erp-danger-color);
}
.bg-warning { /* Example for a "on-hold" status */
  background-color: rgba(221, 107, 32, 0.1) !important;
  color: var(--erp-warning-color) !important;
  border: 1px solid var(--erp-warning-color);
}


/* --- Modal & Form Styling (Assume a modal structure similar to previous example) --- */
/* If you have a modal in this HTML, its elements will inherit from previous modal styles. */
/* You can add specific modal styling here if needed. Example: */
/*
#addTransaction .modal-content { ... }
#addTransaction .form-label { ... }
*/

/* Plugin Compatibility (DataTables - Consistent) */
.dataTables_wrapper .dataTables_length select,
.dataTables_wrapper .dataTables_filter input {
  height: calc(var(--erp-input-height) - 4px) !important;
  border-radius: var(--erp-border-radius) !important;
  border: 1px solid var(--erp-border-color) !important;
  padding: 0.35rem 0.6rem !important;
  margin: 0 5px;
  background-color: var(--erp-content-bg) !important; /* Ensure bg matches */
}
.dataTables_wrapper .dataTables_paginate .paginate_button {
  padding: 0.4em 0.8em !important;
  margin: 0 2px !important;
  border-radius: var(--erp-border-radius) !important;
  border: 1px solid var(--erp-border-color) !important;
  color: var(--erp-text-muted-color) !important;
}
.dataTables_wrapper .dataTables_paginate .paginate_button:hover {
  background: var(--erp-primary-color-light) !important;
  border-color: var(--erp-primary-color-light) !important;
  color: var(--erp-primary-color-dark) !important;
}
.dataTables_wrapper .dataTables_paginate .paginate_button.current,
.dataTables_wrapper .dataTables_paginate .paginate_button.current:hover {
  background: var(--erp-primary-color) !important;
  color: white !important;
  border: 1px solid var(--erp-primary-color) !important;
}
.dataTables_wrapper .dataTables_info,
.dataTables_wrapper .dataTables_length label,
.dataTables_wrapper .dataTables_filter label {
    color: var(--erp-text-muted-color) !important;
    font-size: 0.9em;
}


/* --- Scrollbar (Consistent) --- */
::-webkit-scrollbar {
  width: 7px;
  height: 7px;
}
::-webkit-scrollbar-track {
  background: var(--erp-body-bg);
}
::-webkit-scrollbar-thumb {
  background: #BCC1C8;
  border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover {
  background: #A0A6AD;
}

/* Placeholder (Consistent) */
::placeholder {
  color: #A0AEC0;
  opacity: 1;
}
</style> -->

</head>
<body>
  <div class="dashboard">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h3>نظام إدارة الأعمال</h3>
      </div>
      <nav class="sidebar-menu">
          <a href="dashboard.html" class="menu-item"><i class="fas fa-home"></i> الرئيسية</a>
          <a href="#" class="menu-item coming-soon"><i class="fas fa-shopping-cart"></i> المبيعات (قريباً)</a>
          <a href="purchases.html" class="menu-item"><i class="fas fa-shopping-bag"></i> المشتريات</a>
          <a href="inventory.html" class="menu-item"><i class="fas fa-warehouse"></i> المخزون</a>
          <a href="accounting.html" class="menu-item active"><i class="fas fa-calculator"></i> المحاسبة</a>
          <a href="hr.html" class="menu-item"><i class="fas fa-users"></i> الموارد البشرية</a>
          <a href="reports.html" class="menu-item"><i class="fas fa-chart-bar"></i> التقارير</a>
          <a href="settings.html" class="menu-item"><i class="fas fa-cog"></i> الإعدادات</a>
      </nav>
    </aside>
    <main class="main-content">
      <div class="page-header">
        <h1>لوحة المحاسبة</h1>
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addTransaction">
          <i class="fas fa-plus"></i> إضافة معاملة
        </button>
      </div>
      
      <div class="financial-summary">
        <div class="summary-card income">
          <h3>إجمالي الإيرادات</h3>
          <div class="amount">125,450 ر.س</div>
          <small>+12% عن الشهر الماضي</small>
        </div>
        <div class="summary-card expense">
          <h3>إجمالي المصروفات</h3>
          <div class="amount">87,250 ر.س</div>
          <small>+5% عن الشهر الماضي</small>
        </div>
        <div class="summary-card balance">
          <h3>صافي الربح</h3>
          <div class="amount">38,200 ر.س</div>
          <small>+24% عن الشهر الماضي</small>
        </div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <h5>آخر المعاملات</h5>
          <div class="search-box">
            <input type="text" placeholder="بحث...">
            <i class="fas fa-search"></i>
          </div>
        </div>
        <div class="card-body">
          <table id="transactionsTable" class="table">
            <thead>
              <tr>
                <th>التاريخ</th>
                <th>الوصف</th>
                <th>الحساب</th>
                <th>المبلغ</th>
                <th>الحالة</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2023-06-24</td>
                <td>فاتورة مبيعات #1001</td>
                <td>البنك الأهلي</td>
                <td class="text-success">+2,450 ر.س</td>
                <td><span class="badge bg-success">مكتمل</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </main>
  </div>
  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>
  <script src="js/main.js"></script>
  <script src="js/accounting.js"></script>
  <script>
    $(document).ready(function() {
      $('#transactionsTable').DataTable({
        language: {
          url: '//cdn.datatables.net/plug-ins/1.11.5/i18n/ar.json'
        },
        order: [[0, 'desc']]
      });
    });
  </script>

  <!-- نموذج إضافة معاملة مالية -->
  <div class="modal fade" id="addTransaction" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">إضافة معاملة مالية جديدة</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="إغلاق"></button>
        </div>
        <div class="modal-body">
          <form id="transactionForm">
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="transactionType" class="form-label">نوع المعاملة</label>
                <select id="transactionType" class="form-control" required>
                  <option value="">اختر نوع المعاملة...</option>
                  <option value="income">إيراد</option>
                  <option value="expense">مصروف</option>
                  <option value="transfer">تحويل</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="transactionDate" class="form-label">التاريخ</label>
                <input type="date" id="transactionDate" class="form-control" required>
              </div>
            </div>
            
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="transactionAmount" class="form-label">المبلغ</label>
                <input type="number" id="transactionAmount" class="form-control" step="0.01" min="0" required>
              </div>
              <div class="col-md-6">
                <label for="transactionCategory" class="form-label">الفئة</label>
                <select id="transactionCategory" class="form-control" required>
                  <option value="">اختر الفئة...</option>
                  <option value="sales">مبيعات</option>
                  <option value="purchases">مشتريات</option>
                  <option value="salaries">رواتب</option>
                  <option value="rent">إيجار</option>
                  <option value="utilities">مرافق</option>
                  <option value="other">أخرى</option>
                </select>
              </div>
            </div>
            
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="transactionAccount" class="form-label">الحساب</label>
                <select id="transactionAccount" class="form-control" required>
                  <option value="">اختر الحساب...</option>
                  <option value="cash">النقد</option>
                  <option value="bank">البنك</option>
                  <option value="credit_card">بطاقة الائتمان</option>
                </select>
              </div>
              <div class="col-md-6 transfer-account-container d-none">
                <label for="transferToAccount" class="form-label">الحساب المستلم</label>
                <select id="transferToAccount" class="form-control">
                  <option value="">اختر الحساب المستلم...</option>
                  <option value="cash">النقد</option>
                  <option value="bank">البنك</option>
                  <option value="credit_card">بطاقة الائتمان</option>
                </select>
              </div>
            </div>
            
            <div class="mb-3">
              <label for="transactionDescription" class="form-label">الوصف</label>
              <textarea id="transactionDescription" class="form-control" rows="3"></textarea>
            </div>
            
            <div class="mb-3">
              <label for="transactionReference" class="form-label">رقم المرجع</label>
              <input type="text" id="transactionReference" class="form-control">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
          <button type="button" id="saveTransaction" class="btn btn-primary">حفظ المعاملة</button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
